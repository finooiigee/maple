Xmln←{
  _I←{⍺⍺(↑⍪⍺⍪↓)⍵}
  (d k v a t)←↓⍉⎕XML ⍵  ⍝ depth keys values attributes types
  (o_t a_t)←1 2         ⍝ JSON types
  d+←1
  ((t∊1 3 7)/t)←o_t     ⍝ XML objects to JSON objects
  ((t∊5)/t)←4
  (((⊂'')⍷v)/v)←⊂⍬
  n←⊃,/(1∘↓(({⊂⍺ ⍵}⌸/∘↓∘⍉1↓{(⌊/⍵),⍺}⌸)⍤1)¯1∘↓)⌈\(⍋d)@⊢(∪d)∘.=d ⍝ parent | children pairs
  (p c)←↓⍉↑n
  u←~{∧/≠k[⍵]}/¨n
  (t[u/p])←a_t
  d[∊u/c]+←1
  m←⊃{(1+((⍸⍺∊¨c)⊃p)⊃d) '' ⍬ 1((¯1+⍺) _I)⍵}/(∊u/c),⊂⍉↑d k v t
  ⎕JSON 1(⎕JSON⍠'M')0 '' ⍬ 1⍪m
}